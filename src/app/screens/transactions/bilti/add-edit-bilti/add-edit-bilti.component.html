<div class="page-title">
  <h1>{{biltiId>0?'Edit':'Add'}} Bilti</h1>
  <div class="action-buttons">
    <button class="custom-button-regulr" (click)="onPressSave()">Save</button>
    <button class="custom-button-regulr">Print</button>
    <button class="custom-button-secondary" (click)="onCancelPress()">
      Cancel
    </button>
  </div>
</div>
<div class="content-section p-3">
  <form [formGroup]="biltiForm">
  <div class="row">
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Transaction Type</label>
        <ng-select name="" id="" formControlName="transactionType" (change)="onOptionSelected($event)" [readonly]="biltiId>0">
          <ng-option *ngFor="let transactionTypesList of filteredTransactionTypesLists" [value]="transactionTypesList">{{transactionTypesList.code}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">FRLR Number</label>
        <ng-select name="" id="" formControlName="frlrNo" (ngModelChange)="onFrlrNoSelectionChange($event)">
          <ng-option *ngFor="let frmTransactionData of frmTransactionData" [value]="frmTransactionData">{{frmTransactionData.frlrNumber}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Vehicle Number</label>
        <ng-select name="" id="" formControlName="vehicleNumber" (change)="onVehicleChange($event)">
          <ng-option *ngFor="let vehicle of filteredVehiclesLists"  [value]="vehicle">{{vehicle.vehicleNumber}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Vehicle Size</label>
        <input type="text" class="input-field" formControlName="vehicleSize" readonly/>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Transporter Code</label>
        <ng-select name="" id="" formControlName="transporterCode" (change)="onTransporterChange($event)">
          <ng-option *ngFor="let transporter of filteredTransportersLists" [value]="transporter.transporterCode">{{transporter.transporterCode}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Transporter Name</label>
        <input type="text" class="input-field" readonly formControlName="transporterName" />
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Freight Code</label>
        <ng-select name="" id="" formControlName="freightCode" (change)="onFreightChange($event)">
          <ng-option *ngFor="let freight of filteredFreightsLists" [value]="freight">{{freight.freightCode}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Source</label>
        <input type="text" class="input-field" formControlName="source" readonly/>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Destination</label>
        <input type="text" class="input-field" formControlName="destination" readonly/>
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Freight Amount</label>
        <input type="text" class="input-field" formControlName="freightAmount" readonly />
      </div>
    </div>
    <div class="col-lg-2 col-md-2">
      <div class="custom-form-input">
        <label for="">Loading Location</label>
        <ng-select class="input-field" placeholder="Select Loading Location" formControlName="loadingLocation">
          <ng-option *ngFor="let loadingLocation of filteredLoadinglocation"
            [value]="loadingLocation.id">{{loadingLocation.value}}</ng-option>
        </ng-select>
      </div>
    </div>
    <div class="col-lg-2 col-md-2" *ngIf="biltiId > 0">
      <div class="custom-form-input">
        <label for="">Status</label>
        <select name="" id="" formControlName="status">
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
        </select>
      </div>
    </div>
  </div>

  <div class="edit-screen-subTable">
    <h4 class="">
      Bilti Details
      <!-- <button class="custom-button-regulr">Add</button> -->
    </h4>
  </div>

  <div class="custom-table">
    <table>
      <thead>
        <tr>
          <th>Line#</th>
          <th>Transaction Type</th>
          <th>Doc. Ref. Number</th>
          <th>Vendor Code</th>
          <th>Vendor Name</th>
          <th>Point Name</th>
          <th>Point Charge</th>
          <th>Remarks</th>
          <th>Paid by details</th>
          <th *ngIf="biltiId > 0">status</th>
          <!-- <th class="text-center">Action</th> -->
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>
            <div class="col-lg-10 col-md-10">
              <div class="custom-form-input biltiwidth">
                <div class="input-with-icon" >
                  <input type="text" class="input-field" formControlName="biltiDetailsTransactionType" [readonly]="biltiId > 0" />
                </div>
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-12 col-md-12">
              <div class="custom-form-input biltiwidth">
                <div class="input-with-icon">
                  <input type="text" class="input-field" readonly formControlName="documentrefNo" />
                </div>
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-12 col-md-12">
              <div class="custom-form-input biltiwidth">
                <ng-select name="" id="" formControlName="vendorCode" (change)="onVendorChange($event)">
                  <ng-option *ngFor="let vendor of filteredVendorcode" [value]="vendor">{{vendor.vendorCode}}</ng-option>
                </ng-select>
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-12 col-md-12">
              <div class="custom-form-input biltiwidth">
                <input type="text" class="input-field" readonly formControlName="vendorName" readonly />
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-10 col-md-10">
              <div class="custom-form-input biltiwidth">
                <ng-select name="" id="" formControlName="pointName" (change)="onPointchargeChange($event)" [readonly]="biltiId>0">
                  <ng-option *ngFor="let pointCharge of filteredPointname" [value]="pointCharge">{{pointCharge.pointName}}</ng-option>
                </ng-select>
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-10 col-md-10">
              <div class="custom-form-input biltiwidth">
                <input type="text" class="input-field" readonly formControlName="pointCharge"  />
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-10 col-md-10">
              <div class="custom-form-input biltiwidth">
                <input type="text" class="input-field" formControlName="remarks"  />
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-10 col-md-0">
              <div class="custom-form-input biltiwidth">
                <input type="text" class="input-field" formControlName="paidByDetails" [readonly]="biltiId > 0"  />
              </div>
            </div>
          </td>
          <td>
            <div class="col-lg-10 col-md-10" *ngIf="biltiId > 0">
              <div class="custom-form-input biltiwidth">
                <select name="" id="" formControlName="biltiStatus">
                  <option value="Active">Active</option>
                  <option value="Inactive">Inactive</option>
                </select>
              </div>
            </div>
          </td>
          <!-- <td class="text-center">
            <img src="assets/images/icons/trash.svg" class="me-2 pointer" alt="link" />
          </td> -->
        </tr>
      </tbody>
    </table>
  </div>
  </form>
</div>
<div class="spinner" *ngIf="loadSpinner">
  Loading...
</div>